var stations = {
type: "FeatureCollection",
crs: { "type": "name", "properties": { "name": "urn:ogc:def:crs:EPSG::3826" } },
features: [
{ "type": "Feature", "properties": { "SiteName": "三重", "SiteEngNam": "Sanchong", "AreaName": "北部空品區", "County": "新北市", "Township": "三重區", "SiteAddres": "新北市三重區三和路重陽路交口","TWD97Lon":121.493806,"TWD97Lat":25.072611, "SiteType": "交通測站" }, "geometry": { "type": "Point","coordinates": [121.493806,25.072611] } }
{ "type": "Feature", "properties": { "SiteName": "土城", "SiteEngNam": "Tucheng", "AreaName": "北部空品區", "County": "新北市", "Township": "土城區", "SiteAddres": "新北市土城區學府路一段241號","TWD97Lon":121.451861,"TWD97Lat":24.982528, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.451861,24.982528] } }
{ "type": "Feature", "properties": { "SiteName": "士林", "SiteEngNam": "Shilin", "AreaName": "北部空品區", "County": "臺北市", "Township": "北投區", "SiteAddres": "臺北市北投區文林北路155號","TWD97Lon":121.515389,"TWD97Lat":25.105417, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.515389,25.105417] } }
{ "type": "Feature", "properties": { "SiteName": "大同", "SiteEngNam": "Datong", "AreaName": "北部空品區", "County": "臺北市", "Township": "大同區", "SiteAddres": "臺北市大同區重慶北路三段2號","TWD97Lon":121.513311,"TWD97Lat":25.0632, "SiteType": "交通測站" }, "geometry": { "type": "Point","coordinates": [121.513311,25.0632] } }
{ "type": "Feature", "properties": { "SiteName": "基隆", "SiteEngNam": "Keelung", "AreaName": "北部空品區", "County": "基隆市", "Township": "信義區", "SiteAddres": "基隆市東信路324號","TWD97Lon":121.760056,"TWD97Lat":25.129167, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.760056,25.129167] } }
{ "type": "Feature", "properties": { "SiteName": "淡水", "SiteEngNam": "Tamsui", "AreaName": "北部空品區", "County": "新北市", "Township": "淡水區", "SiteAddres": "新北市淡水區中正東路42巷6號","TWD97Lon":121.449239,"TWD97Lat":25.1645, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.449239,25.1645] } }
{ "type": "Feature", "properties": { "SiteName": "中山", "SiteEngNam": "Zhongshan", "AreaName": "北部空品區", "County": "臺北市", "Township": "中山區", "SiteAddres": "臺北市中山區林森北路511號","TWD97Lon":121.526528,"TWD97Lat":25.062361, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.526528,25.062361] } }
{ "type": "Feature", "properties": { "SiteName": "菜寮", "SiteEngNam": "Cailiao", "AreaName": "北部空品區", "County": "新北市", "Township": "三重區", "SiteAddres": "新北市三重區中正北路163號","TWD97Lon":121.481028,"TWD97Lat":25.06895, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.481028,25.06895] } }
{ "type": "Feature", "properties": { "SiteName": "古亭", "SiteEngNam": "Guting", "AreaName": "北部空品區", "County": "臺北市", "Township": "大安區", "SiteAddres": "臺北市大安區羅斯福路三段153號","TWD97Lon":121.529556,"TWD97Lat":25.020608, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.529556,25.020608] } }
{ "type": "Feature", "properties": { "SiteName": "陽明", "SiteEngNam": "Yangming", "AreaName": "北部空品區", "County": "臺北市", "Township": "北投區", "SiteAddres": "臺北市北投區竹子湖路111號","TWD97Lon":121.529583,"TWD97Lat":25.182722, "SiteType": "公園測站" }, "geometry": { "type": "Point","coordinates": [121.529583,25.182722] } }
{ "type": "Feature", "properties": { "SiteName": "永和", "SiteEngNam": "Yonghe", "AreaName": "北部空品區", "County": "新北市", "Township": "永和區", "SiteAddres": "新北市永和區永和路光復路交口","TWD97Lon":121.516306,"TWD97Lat":25.017, "SiteType": "交通測站" }, "geometry": { "type": "Point","coordinates": [121.516306,25.017] } }
{ "type": "Feature", "properties": { "SiteName": "新店", "SiteEngNam": "Xindian", "AreaName": "北部空品區", "County": "新北市", "Township": "新店區", "SiteAddres": "新北市新店區民族路108號","TWD97Lon":121.537778,"TWD97Lat":24.977222, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.537778,24.977222] } }
{ "type": "Feature", "properties": { "SiteName": "新莊", "SiteEngNam": "Xinzhuang", "AreaName": "北部空品區", "County": "新北市", "Township": "新莊區", "SiteAddres": "新北市新莊區中正路510號","TWD97Lon":121.4325,"TWD97Lat":25.037972, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.4325,25.037972] } }
{ "type": "Feature", "properties": { "SiteName": "汐止", "SiteEngNam": "Xizhi", "AreaName": "北部空品區", "County": "新北市", "Township": "汐止區", "SiteAddres": "新北市汐止區樟樹一路141巷2號","TWD97Lon":121.6423,"TWD97Lat":25.067131, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.6423,25.067131] } }
{ "type": "Feature", "properties": { "SiteName": "萬里", "SiteEngNam": "Wanli", "AreaName": "北部空品區", "County": "新北市", "Township": "萬里區", "SiteAddres": "新北市萬里區瑪鋉路221號","TWD97Lon":121.689881,"TWD97Lat":25.179667, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.689881,25.179667] } }
{ "type": "Feature", "properties": { "SiteName": "萬華", "SiteEngNam": "Wanhua", "AreaName": "北部空品區", "County": "臺北市", "Township": "萬華區", "SiteAddres": "臺北市萬華區中華路1段66號","TWD97Lon":121.507972,"TWD97Lat":25.046503, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.507972,25.046503] } }
{ "type": "Feature", "properties": { "SiteName": "松山", "SiteEngNam": "Songshan", "AreaName": "北部空品區", "County": "臺北市", "Township": "松山區", "SiteAddres": "臺北市松山區八德路四段746號","TWD97Lon":121.578611,"TWD97Lat":25.05, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.578611,25.05] } }
{ "type": "Feature", "properties": { "SiteName": "板橋", "SiteEngNam": "Banqiao", "AreaName": "北部空品區", "County": "新北市", "Township": "板橋區", "SiteAddres": "新北市板橋區文化路一段25號","TWD97Lon":121.458667,"TWD97Lat":25.012972, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.458667,25.012972] } }
{ "type": "Feature", "properties": { "SiteName": "林口", "SiteEngNam": "Linkou", "AreaName": "北部空品區", "County": "新北市", "Township": "林口區", "SiteAddres": "新北市林口區民治路25號","TWD97Lon":121.376869,"TWD97Lat":25.077197, "SiteType": "一般測站" }, "geometry": { "type": "Point","coordinates": [121.376869,25.077197] } }
]
};






var cities = new L.LayerGroup();


// token
var mbAttr = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    'Imagery © <a href="http://mapbox.com">Mapbox</a>',
    mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw';

// 底圖設置
var grayscale = L.tileLayer(mbUrl, {
        id: 'mapbox.light',
        attribution: mbAttr
    }),
    streets = L.tileLayer(mbUrl, {
        id: 'mapbox.streets',
        attribution: mbAttr
    });

//設function highlightFeature(e)，用於當hover的時候，物件樣式改變之設定。
function highlightFeature(e) {
    var layer = e.target;
    info.update(layer.feature.properties);

    layer.setStyle({
        weight: 3,
        color: '#fe4d4d',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
}

//設function resetHighlight(e)，用於當mouseout的時候，還原最初之樣式設定。
function resetHighlight(e) {
    geojson.resetStyle(e.target);
    info.update();

}

function getColor(d) {
    return d == 6300001 ? '#fe2a69' :
        d == 6300002 ? '#f7aa15' :
        d == 6300003 ? '#fffd47' :
        d == 6300004 ? '#4aba58' :
        d == 6300005 ? '#13dfdf' :
        d == 6300006 ? '#2a3580' :
        d == 6300007 ? '#a746eb' :
        d == 6300008 ? '#a80000' :
        d == 6300009 ? '#035522' :
        d == 6300010 ? '#46588e' :
        d == 6300011 ? '#74ff71' :
        d == 6300012 ? '#ff2d11' :
        '#000000';
}
//設function style ，用於設定geojson各個資料的，各種CSS屬性。
function style(feature) {
    return {
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.3,
        fillColor: getColor(feature.properties.towncode)
    };
}

function style2(feature) {
    return {
        weight: 2,
        opacity: 0.4,
        color: 'red',
    };
}
//設function zoomToFeature(e)，用於當clik listener啟動時，放大物件。
function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}

//設function onEachFeature(feature, layer)，用於加入the listeners等事件。
function onEachFeature(feature, layer) {
  layer.on({
    mouseover: highlightFeature,
    mouseout: resetHighlight,
    click: zoomToFeature
  });
}


//設function onEachFeature(feature, layer)，用於加入the listeners等事件。
function onEachFeature2(feature, layer) {

    var popupContent = "<p>這裡是 " +
        feature.properties.Name + "~~喔。<br>" +
        feature.properties.Descriptio + "簡介不錯吧</p>";

    layer.bindPopup(popupContent);
}

// 選項1
var baseLayers = {
    "灰色底圖": grayscale,
    "街道底圖": streets
};
// 選項2
var overlays = {
    "河濱公園": cities,
};

//地圖輸出之div設定
var map03 = L.map('map-3', {
    center: [25.087818, 121.538607],
    zoom: 11,
    layers: [grayscale, cities]
});
// 控制選項
L.control.layers(baseLayers, overlays).addTo(map03);

// load geojson檔案
L.geoJson(tpeRiverPark, {
    onEachFeature: onEachFeature2,
    pointToLayer: function(feature, latlng) {
        return L.circleMarker(latlng, {
            radius: 8,
            fillColor: "#ff7800",
            color: "#000",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        });
    }
}).addTo(cities);

L.geoJson(stations,{
  onEachFeature: onEachFeature2,
  pointToLayer: function(feature, latlng) {
      return L.circleMarker(latlng, {
          radius: 8,
          fillColor: "#ff7800",
          color: "#000",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
      });
  }
}).addTo(cities);
